<!DOCTYPE html>
<html lang="en">
<head>
        <title>Big-O Notation and Feature Selection</title>
        <meta charset="utf-8" />
				<meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="http://jessefurmanek.com/blog/theme/images/jf_icon.png"/>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://jessefurmanek.com/blog/theme/css/main.css" type="text/css" />
		

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://jessefurmanek.com/blog/css/ie.css"/>
                <script src="http://jessefurmanek.com/blog/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://jessefurmanek.com/blog/css/ie6.css"/><![endif]-->
			
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>			
	  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Vollkorn:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
</head>

<body id="index" class="home">
	
	<div class = "main">
		<div class = "visible-sm-12 hidden-md hidden-lg mobile-topbar">
			<span class = "logo">
				<a href = "http://jessefurmanek.com/about"><img src ="http://jessefurmanek.com/blog/theme/images/about_icon.png" class="center-block" id = "mini_about"></a>	
				<a href = "http://jessefurmanek.com"><img src ="http://jessefurmanek.com/blog/theme/images/jf_icon.png" class="center-block"id= "mini_circle_jf"></a>
				<a href = "http://jessefurmanek.com/blog"><img src ="http://jessefurmanek.com/blog/theme/images/writing_icon.png" class="center-block" id = "mini_writing"></a>
			</span>
		</div>
				
		<div class = "col-md-3 sidebar hidden-xs hidden-sm">
			<div class="header">
 				<div class = "row"></div>
			</div>
					
			<div class = "logo">
				<div class = "row">
					<a href = "http://jessefurmanek.com/about" ><img src ="http://jessefurmanek.com/blog/theme/images/about_icon.png"></a>	
				</div>
				
				<div class = "row">								
					<a href = "http://jessefurmanek.com/"><img src ="http://jessefurmanek.com/blog/theme/images/jf_icon.png"></a>
				</div>
				
				<div class = "row">		
					<a href = "http://jessefurmanek.com/blog"><img src ="http://jessefurmanek.com/blog/theme/images/writing_icon.png"></a>
				</div>
			</div>
						
				
			<div class ="social"> 
  			<div class="row">
					<div class = "soc_icons">
  		  		 <a href = "https://twitter.com/jessefurmanek"><img src="http://jessefurmanek.com/blog/theme/images/twitter_logo_blue.png" class="center-block"></a>
  		  		 <a href="http://instagram.com/jessefurmanek"><img src="http://jessefurmanek.com/blog/theme/images/insta_logo.png"  class="center-block" ></a>
  		  		 <a href="https://github.com/jessefurmanek"> <img src="http://jessefurmanek.com/blog/theme/images/github_logo.png"  class="center-block"></a>
  		  		 <a href="https://www.flickr.com/photos/49440392@N07/"><img src="http://jessefurmanek.com/blog/theme/images/flickr_logo.png"  class="center-block"></a>
  		  		 <a href="https://www.linkedin.com/in/jessefurmanek"><img src="http://jessefurmanek.com/blog/theme/images/linkedin_logo.png"  class="center-block"></a>		
					</div>
				</div>
			</div>
			
			<div class="footer">
				<div class = "row"></div>
			</div>
			
			
		</div>
		

		<div class = "col-sm-12 col-md-9 col-md-push-3">
			<div class = "row">
<section id="content" >
    <div class="body">
      <article>

        <header>
          <h1 class="entry-title">
	          <a href="http://jessefurmanek.com/blog/big-o-and-feature-selection.html" rel="bookmark"
	             title="Permalink to Big-O Notation and Feature Selection">  
			  Big-O Notation and Feature Selection</a>
		   </h1>
        </header>
        <div class="entry-content">
			<div class="post-info">
				<ul><li class="published" title="2015-03-13T00:00:00-05:00">Fri 13 March 2015</li>

<!-- /.post-info -->        <li class="vcard author">
                 by&nbsp;<a class="url fn" href="http://jessefurmanek.com/blog/author/jesse-furmanek.html">Jesse Furmanek</a>
        </li>
	
<p class = "pull-right tag_outer_class"><span class= "tags_text">tags: </span><a href="http://jessefurmanek.com/blog/tag/programming.html" class = "tags">programming</a><a href="http://jessefurmanek.com/blog/tag/machine-learning.html" class = "tags">machine-learning</a></p>				</ul>

			</div>

          <p>Some problems are computationally intractable-- while we know how to program a computer to solve a problem, the computer (or array of computers) would take so much time<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> that calculating the answer wouldn't be worth it. One of these intractable problems is finding all subsets of a large group, as I recently found out when I <a href="https://github.com/jessefurmanek/udacity_coursework/tree/master/intro_to_machine_learning/final_project">completed</a> the intro to machine learning course offered by <a href="https://www.udacity.com/course/ud120">Udacity</a>.  </p>
<p>For the final project, students attempted to predict whether an individual was a person of interest in the Enron scandal based on characteristics of the <a href="http://en.wikipedia.org/wiki/Enron_Corpus">Enron email corpus</a> (a giant file containing about 600,000 emails sent by Enron employees), as well as basic employee characteristics (or features), shown below:</p>
<div class="highlight"><pre>financial features: [&#39;salary&#39;, &#39;deferral_payments&#39;, &#39;total_payments&#39;, &#39;loan_advances&#39;,&#39;bonus&#39;, &#39;restricted_stock_deferred&#39;, &#39;deferred_income&#39;, &#39;total_stock_value&#39;, &#39;expenses&#39;, &#39;exercised_stock_options&#39;, &#39;other&#39;, &#39;long_term_incentive&#39;, &#39;restricted_stock&#39;, &#39;director_fees&#39;]

email features: [&#39;to_messages&#39;, &#39;email_address&#39;, &#39;from_poi_to_this_person&#39;, &#39;from_messages&#39;,&#39;from_this_person_to_poi&#39;, &#39;poi&#39;, &#39;shared_receipt_with_poi&#39;]
</pre></div>


<p>These features correspond with a flag (or label) which indicates whether that employee was a person of interest (POI). During the course, we used decision tree<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup> and random forest classifying algorithms for many of our classification problems, so I decided to use these algorithms for the final project.  </p>
<p>To keep the model simple, I only used the employee features (leaving the Enron corpus for another day).  Rather than throwing all of the features into an decision tree or random forests implementation (which in this case leads to poor classifier performance), I tried to select the features that yielded the highest combination of recall and precision.</p>
<p>In machine learning, feature selection is self-explanatory-- it's the process of selecting features for your model.  What isn't clear, however, is the best method of feature selection.  As someone pretty new to the machine learning, I chose a method which seemed pretty clever at the time, but turned out to be only somewhat useful and not at all scalable.</p>
<p>Twenty features didn't seem like a very large number, small enough that I could iterate through every subset and find the best combination of features. Subsets represent the different ways you can choose items of a particular set<sup id="fnref:3"><a class="footnote-ref" href="#fn:3" rel="footnote">3</a></sup>.  For example, there are four subsets in the set {A, B}:</p>
<ul>
<li>{ }  choosing nothing at all<sup id="fnref:4"><a class="footnote-ref" href="#fn:4" rel="footnote">4</a></sup></li>
<li>{ A }  just choosing A</li>
<li>{ B }  just choosing B</li>
<li>{ A, B } choosing both A &amp; B</li>
</ul>
<p>Figuring out the number of subsets from a set of two items is easy enough-- computing all possible combinations of a set of twenty features is not, and that leads me to Big-O notation.</p>
<p>Big-O notation is a way of classifying an algorithm's processing time as the input for that algorithm increases in size. Say you had an algorithm that took a list of names, and sorted them in alphabetical order.  All algorithms take time to run<sup id="fnref:5"><a class="footnote-ref" href="#fn:5" rel="footnote">5</a></sup>.  The results of running this name-sorting algorithm on an increasing numbers of names would look something like this:</p>
<table>
    <tr>
        <td><u>Number of Names</u></td>
                <td><u>Time to Compute</u></td>
    </tr>
    <tr>
        <td>1</td>
                <td>1 seconds</td>
    </tr>
    <tr>
        <td>10</td>
                <td>100 seconds</td>
    </tr>
    <tr>
        <td>100</td>
                <td>10,000 seconds</td>
    </tr>
</table>

<p>The time it takes the sorting algorithm to run is the square of the number of name inputs.  In Big-O notation, the algorithm would be said to run in O(n<sup>2</sup>), or quadratic time.  There are a number of <a href="http://en.wikipedia.org/wiki/Time_complexity">common algorithm complexities</a>, the most simple being constant time, often written as O(1).  An example of constant time would be accessing a single item of an array using its index value (this is because the computer only needs a single instruction to execute this operation, regardless of the instruction's "size")<sup id="fnref:6"><a class="footnote-ref" href="#fn:6" rel="footnote">6</a></sup>.  Finding all subsets of a given set, unfortunately, falls on the opposite end of the time-complexity spectrum.</p>
<p>What happens if you try to compute the number subsets at the same rate as we did for sorting names?</p>
<table>
    <tr>
        <td><u>Number of Items in a Set</u></td>
                <td><u>Number of Subsets</u></td>
    </tr>
    <tr>
        <td>1</td>
                <td>2 subsets</td>
    </tr>
    <tr>
        <td>10</td>
                <td>1,024 subsets</td>
    </tr>
    <tr>
        <td>100</td>
                <td>1.26 x 10^30 subsets</td>
    </tr>
</table>

<p>Yikes<sup id="fnref:7"><a class="footnote-ref" href="#fn:7" rel="footnote">7</a></sup>.  Finding the number of subsets of a given set ends up returning very large numbers very fast, at an exponential rate in fact.  This type of complexity is known unceremoniously as exponential time, and is written as O(2<sup>n</sup>).</p>
<p>You'll note that I didn't use a time unit for the subset.  Even if the algorithm took no time to compute, it would still need to return the resulting subsets somehow, which in itself would take time.  In the impossible situation of a algorithm with zero time cost, an algorithm with O(2<sup>n</sup>) is nonetheless computationally intractable, as the number of items returned is so big that it would take an exponentially longer time run on larger sets.</p>
<p>Let's bring it back to feature selection.  While I wanted sort through all twenty features and choose the best combination, this just wasn't possible given the computational complexity of finding subsets. So what did I do?</p>
<p>I used a combination of intuition and testing to get the universe of features down to a reasonable number (twelve, which still took awhile to run), and the ran the subset algorithm from there.  I chose features by measuring the recall and precision that resulted after removing features which appeared unhelpful on their face, as well as by looking at the 'feature_importances_' attribute of sklearn's implementation of <a href="http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html">random forests</a>.</p>
<p>While this is not ideal <sup id="fnref:8"><a class="footnote-ref" href="#fn:8" rel="footnote">8</a></sup>, I ended up with some okay results<sup id="fnref:9"><a class="footnote-ref" href="#fn:9" rel="footnote">9</a></sup> and a practical lesson in alogrithm complexity and Big-O Notation: respect the exponent and its power(s).</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Certain types of encryption fall into this category. In the case of AES-256 encryption, too long is greater than the <a href="http://www.eetimes.com/document.asp?doc_id=1279619">age of the universe</a>.&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Every time I think of decision trees, I think of <a href="http://www.dailymotion.com/video/xmp51o_slow-decision-making-from-the-lord-of-the-rings-the-two-towers-2002_shortfilms">these</a> guys.&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>Check out <a href="http://www.mathsisfun.com/sets/sets-introduction.html">mathisfun.com</a> for more information about sets and subsets.&#160;<a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>Called an 'empty set'.&#160;<a class="footnote-backref" href="#fnref:4" rev="footnote" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p><a href="http://xkcd.com/285/">Citation needed</a>.&#160;<a class="footnote-backref" href="#fnref:5" rev="footnote" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p><a href="http://en.wikipedia.org/wiki/Time_complexity">Wikipedia</a> offers a pretty great explanation of the various time complexities.&#160;<a class="footnote-backref" href="#fnref:6" rev="footnote" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:7">
<p>That escalated <del>quickly</del> exponentially.&#160;<a class="footnote-backref" href="#fnref:7" rev="footnote" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
<li id="fn:8">
<p>Since completing the project, I learned that sklearn actually offers <a href="http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html#sklearn.feature_selection.RFE">tools</a> that can be used to pare down features recursively-- perhaps I'll explore those in another post.&#160;<a class="footnote-backref" href="#fnref:8" rev="footnote" title="Jump back to footnote 8 in the text">&#8617;</a></p>
</li>
<li id="fn:9">
<p>Precision: 0.59184    Recall: 0.52200  (we were shooting for better than .30 for both)&#160;<a class="footnote-backref" href="#fnref:9" rev="footnote" title="Jump back to footnote 9 in the text">&#8617;</a></p>
</li>
</ol>
</div>
        </div><!-- /.entry-content -->

      </article>
    </div>
</section>
			</div>
		</div>
		
		<div class = "visible-sm-12 hidden-md hidden-lg mobile-bottombar">
				<div class = "row">
					<div class = "container">

						<a href = "https://twitter.com/jessefurmanek"><img src="http://jessefurmanek.com/blog/theme/images/twitter_logo_blue.png" ></a>
						<a href="http://instagram.com/jessefurmanek"><img src="http://jessefurmanek.com/blog/theme/images/insta_logo.png" ></a>
						<a href="https://github.com/jessefurmanek"> <img src="http://jessefurmanek.com/blog/theme/images/github_logo.png" ></a>
						<a href="https://www.flickr.com/photos/49440392@N07/"><img src="http://jessefurmanek.com/blog/theme/images/flickr_logo.png"></a>
						<a href="https://www.linkedin.com/in/jessefurmanek"><img src="http://jessefurmanek.com/blog/theme/images/linkedin_logo.png" ></a>

				</div>
			</div>
		</div>
		
</div>



	

<!-- <ul>
	<li><a href="http://jessefurmanek.com/blog/category/machine-learning-programming.html">Machine Learning, Programming</a></li>
	<li><a href="http://jessefurmanek.com/blog/category/personal.html">Personal</a></li>
	<li><a href="http://jessefurmanek.com/blog/category/programming-data-structures-algorithms.html">Programming, Data Structures, Algorithms</a></li>
	<li><a href="http://jessefurmanek.com/blog/category/web-development-programming.html">Web Development, Programming</a></li>
</ul>
 -->
	
        <footer id="contentinfo" >
                <address id="about" class="vcard ">
                Generated with <a href="http://getpelican.com/" target="_blank">Pelican</a>, which takes
                great advantage of <a href="http://python.org" target="_blank">Python</a>.
		
                </address><!-- /#about -->
		
        </footer><!-- /#contentinfo -->

</body>
</html>